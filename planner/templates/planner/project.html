{% extends "planner/base.html" %}

{% block body %}
    {#        <p>project id: {{ view.project_id }}</p>#}

    {#    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.0/dragula.min.css'>#}









      <meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.0/dragula.min.css'>
{#<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:400,700'><link rel="stylesheet" href="./style.css">#}








    <section class="lists-container">
        {% for category in category_list %}
            <div class="list">
                <h3 class="list-title">{{ category.category_name }}</h3>
                <ul class="list-items">
                    {% for task in category.task_set.all %}
{#                        <li onclick="location.href='{% url "planner-namespace:update_task" view.project_id task.pk %}'">#}
                        <li>
                            <div class="row no-gutters"  class="item">

                                <div class="col-xs-10 col-md-11">
                                    {{ task.text }}
                                    <span style="font-size: xx-small">{{ task.author }}</span>
                                </div>
                                <div class="col-xs-2 col-md-1">
                                    <a style="font-size: small; color: grey"
                                       href="{% url "planner-namespace:delete_task" view.project_id task.pk %}">
                                        <i class="fa fa-times"></i>
                                    </a>
                                </div>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
                {#                <p>project id: {{ view.project_id }}</p>#}
                {#                <p>category id: {{ category.id }}</p>#}
                {#                <br><br><br><br><br>#}
                <form action="{% url "planner:add_task" view.project_id category.id %}" method='GET'>
                    <button type='submit' class="add-card-btn btn">Add Task</button>
                </form>
            </div>
        {% endfor %}
        <form action="{% url "planner-namespace:add_category" view.project_id %}" method='GET'>
            <button type="submit" class="add-list-btn btn">Add a list</button>
        </form>
    </section>

    <!-- dragula -->

    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.0/dragula.min.js'></script>

    <script>
        var d = dragula({
            moves: function (el, cont, handle) {
                return handle.className !== 'title'
            }
        })
        var cs = document.querySelectorAll('.list-items')
        for (var i in cs) {
            d.containers.push(cs[i])
        }
    </script>


    <style>

        {#    * {#}
        {#  font-family: 'Roboto', sans-serif !important;#}
        {#}#}

        html, body {
          width: 100%;
          height: 100%;
          display: flex;
          justify-content: center;
          align-items: center;
          flex-direction: row;
          flex-wrap: wrap;
          {#background-color: #0079BF;#}
        }

        {#.list-items {#}
        {#  display: flex;#}
        {#  flex-direction: column;#}
        {#  flex-wrap: wrap;#}
          {#background-color: #e3e3e3;#}
        {#  padding: 15px;#}
        {#  border-radius: 4px;#}
        {#  margin: 0 5px;#}
        {#  width: 250px;#}
        {#  min-height: 200px;#}
          {#box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);#}
        {#}#}
        .list-items .list-title {
          {#font-size: 20px;#}
          {#font-weight: 700;#}
          line-height: 1.3;
        }

        .item {
          margin-top: 5px;
          padding: 10px;
          background-color: red;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
          border-radius: 4px;
        }

    </style>

{% endblock %}


</html>